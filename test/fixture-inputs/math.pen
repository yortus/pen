/*
 * egs:
 *      2+3*5
 *      42*(333-2)
 */


{memoise, i32} = import 'std'


start = expr


expr = memoise(add | sub | term)
add = {type: 'add',  lhs: expr,  rhs: `+` term} // NB: commas allowed but optional
sub = {type: 'sub'   lhs: expr   rhs: `-` term}

term = memoise(mul | div | factor)
mul = {['type']: 'mul'}   {lhs: term}   {['rhs']: `*` factor} // test both Record and Field exprs
div = {type: 'div'   lhs: term   rhs: `/` factor}

factor = i32 | `(` expr `)`
