/*
 * egs:
 *      2+3*5
 *      42*(333-2)
 */


{Memoize, i32} = import 'pen'


export {math = expr}


let expr = Memoize(add | sub | term)
let add = {type = 'add'   lhs = expr   rhs = "+" term}
let sub = {type = 'sub'   lhs = expr   rhs = "\-" term}

let term = Memoize(mul | div | factor)
let mul = {type = 'mul'   lhs = term   rhs = "*" factor}
let div = {type = 'div'   lhs = term   rhs = "/" factor}

let factor = i32 | "(" expr ")"
