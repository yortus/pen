/*
 * egs:
 *      2+3*5
 *      42*(333-2)
 */

let {Memoize} = import 'pen';

start = expr

expr = Memoize(add | sub | term)
add = {type: 'add', lhs: expr, rhs: ADD term}
sub = {type: 'sub', lhs: expr, rhs: SUB term}

term = Memoize(mul | div | factor)
mul = {type: 'mul', lhs: term, rhs: MUL factor}
div = {type: 'div', lhs: term, rhs: DIV factor}

factor = i32 | LP expr RP

ADD = `+`
SUB = `-`
MUL = `*`
DIV = `/`
LP  = `(`
RP  = `)`
